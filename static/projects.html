<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>TACTICA INGENIERIA | Centro de Proyectos y Anal√≠ticas</title>
  <link rel="icon" href="/static/favicon.ico"/>
  <style>
    :root{
      --bg:#0B0F14; --surface:#0F172A; --surface2:#111827; --border:#223044;
      --text:#E5E7EB; --muted:#9CA3AF;
      --primary:#22C1C3; --primary-soft: rgba(34,193,195,.16); --primary-border: rgba(34,193,195,.45);
      --r:16px; --shadow: 0 18px 42px rgba(0,0,0,.45);
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:var(--font); color:var(--text);
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(34,193,195,.10), transparent 55%),
        radial-gradient(900px 600px at 80% 20%, rgba(34,193,195,.06), transparent 55%),
        var(--bg);
    }
    .wrap{max-width:1200px; margin:0 auto; padding:16px}
    .top{
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
      padding:12px 14px; border:1px solid var(--border); border-radius: 18px;
      background: rgba(15,23,42,.55); backdrop-filter: blur(10px); box-shadow: var(--shadow);
    }
    .brand{display:flex; gap:10px; align-items:center}
    .logo{width:34px;height:34px;border-radius:10px;background:var(--primary-soft);border:1px solid var(--primary-border);display:grid;place-items:center;font-weight:900;}
    .title{display:flex; flex-direction:column; line-height:1.1}
    .title strong{font-size:15px}
    .title span{font-size:12px;color:var(--muted)}
    .nav{display:flex; gap:10px; color:var(--muted); font-size:13px; overflow:auto; scrollbar-width:none;}
    .nav::-webkit-scrollbar{display:none}
    .nav a{color:inherit; text-decoration:none; padding:8px 10px; border-radius:10px; border:1px solid transparent; white-space:nowrap}
    .nav a.active{color:var(--text); border-color:var(--primary-border); background:var(--primary-soft)}
    .actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    .btn{
      padding:10px 12px;
      border-radius: 12px;
      border:1px solid var(--border);
      background: rgba(15,23,42,.55);
      color:var(--text);
      cursor:pointer;
      font-weight:650;
      font-size:13px;
      display:flex;
      align-items:center;
      gap:8px;
      user-select:none;
      white-space:nowrap;
    }
    .btn.primary{ border-color: var(--primary-border); background: var(--primary-soft); }
    .btn:hover{ border-color: rgba(34,193,195,.35); }
    .grid{display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; margin-top:12px}
    @media(max-width: 1100px){ .grid{grid-template-columns: repeat(2,1fr);} }
    @media(max-width: 760px){ .grid{grid-template-columns:1fr;} }
    .card{
      border:1px solid var(--border);
      border-radius: 18px;
      background: rgba(17,24,39,.45);
      box-shadow: var(--shadow);
      padding: 12px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .card h3{margin:0; font-size:15px}
    .meta{color:var(--muted); font-size:12px; line-height:1.3}
    .bars{display:flex; flex-direction:column; gap:8px; margin-top:2px}
    .barRow{display:grid; grid-template-columns: 130px 1fr 56px; gap:10px; align-items:center; font-size:12px; color:var(--muted)}
    .bar{
      height: 10px; border-radius: 999px;
      border:1px solid var(--border);
      background: rgba(15,23,42,.55);
      overflow:hidden;
    }
    .fill{
      height:100%;
      background: linear-gradient(90deg, rgba(34,193,195,.9), rgba(34,193,195,.25));
      width: 0%;
    }
    .smallRow{display:flex; gap:10px; flex-wrap:wrap}
    .pill{font-size:11px;color:var(--muted);border:1px solid var(--border);padding:2px 8px;border-radius:999px}
    .empty{
      margin-top:12px;
      border:1px dashed rgba(34,193,195,.35);
      border-radius: 18px;
      background: rgba(15,23,42,.35);
      padding:16px;
      color:var(--muted);
      text-align:center;
    }
    .toast{position:fixed; right:14px; top:14px; padding:10px 12px; border-radius:14px; border:1px solid var(--border);
      background: rgba(17,24,39,.75); color:var(--text); box-shadow: var(--shadow); display:none;}
    .toast.show{display:block}
  </style>
  <style>
    /* ===== NAVY DARK THEME - T√ÅCTICA INGENIER√çA ===== */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

    :root {
      --dk-bg: #080B18;
      --dk-surface: #0D1120;
      --dk-surface2: #111827;
      --dk-surface3: #151E2E;
      --dk-border: rgba(99,120,180,.2);
      --dk-border2: rgba(99,120,180,.35);
      --dk-glow-purple: rgba(120,80,220,.18);
      --dk-glow-cyan: rgba(34,193,195,.12);
      --dk-glow-green: rgba(16,185,129,.12);
      --dk-text: #E2E8F0;
      --dk-muted: #8B9BAE;
      --dk-dim: #4A6580;
    }

    html, body {
      background: var(--dk-bg) !important;
      background-image:
        radial-gradient(ellipse 900px 600px at 15% 5%, rgba(100,60,200,.12) 0%, transparent 55%),
        radial-gradient(ellipse 700px 500px at 85% 10%, rgba(34,193,195,.07) 0%, transparent 50%),
        radial-gradient(ellipse 600px 800px at 50% 100%, rgba(60,80,180,.08) 0%, transparent 55%) !important;
      background-attachment: fixed !important;
      color: var(--dk-text) !important;
    }

    /* TOPBAR / NAV */
    .topbar, .topnav {
      background: rgba(8,11,24,.88) !important;
      backdrop-filter: blur(16px) !important;
      border-bottom-color: var(--dk-border) !important;
      box-shadow: 0 1px 0 rgba(99,120,180,.15) !important;
    }
    .brand-info strong { color: #E2E8F0 !important; }
    .brand-info span { color: var(--dk-muted) !important; }
    .brand-logo, .nav-logo {
      background: linear-gradient(135deg,#7C3AED,#5B21B6) !important;
      box-shadow: 0 2px 12px rgba(124,58,237,.45) !important;
    }

    /* NAV LINKS */
    .nav a, .nav-link {
      color: var(--dk-muted) !important;
      border-color: transparent !important;
    }
    .nav a:hover, .nav-link:hover {
      background: rgba(99,120,180,.12) !important;
      color: var(--dk-text) !important;
    }
    .nav a.active, .nav-link.active {
      background: rgba(124,58,237,.2) !important;
      color: #A78BFA !important;
      border-color: rgba(124,58,237,.4) !important;
      font-weight: 700 !important;
    }

    /* ICONBAR */
    .iconbar {
      background: rgba(8,11,24,.95) !important;
      border-right-color: var(--dk-border) !important;
    }
    .icon {
      background: var(--dk-surface2) !important;
      border-color: var(--dk-border) !important;
      color: var(--dk-muted) !important;
    }
    .icon:hover {
      background: rgba(124,58,237,.2) !important;
      border-color: rgba(124,58,237,.45) !important;
      color: #A78BFA !important;
    }
    .icon.active {
      background: rgba(124,58,237,.25) !important;
      border-color: rgba(124,58,237,.6) !important;
      color: #C4B5FD !important;
    }

    /* TOOLBAR / ACTION STRIP */
    .toolbar, .action-strip {
      background: rgba(13,17,32,.8) !important;
      border-color: var(--dk-border) !important;
      backdrop-filter: blur(8px) !important;
    }

    /* ALL CARDS / PANELS */
    .panel-card, .right, .cmd, .hstrip, .main-card,
    .upload-card, .chat-card, .section-card,
    [class*="-card"], [class*="-panel"] {
      background: rgba(13,17,32,.7) !important;
      border-color: var(--dk-border) !important;
      backdrop-filter: blur(8px) !important;
      color: var(--dk-text) !important;
    }

    /* RIGHT PANEL */
    .right {
      background: rgba(8,11,24,.9) !important;
      border-left-color: var(--dk-border) !important;
    }

    /* CMD BAR */
    .cmd {
      border-top-color: var(--dk-border) !important;
      background: rgba(8,11,24,.95) !important;
    }
    .cmd input {
      background: rgba(13,17,32,.9) !important;
      border-color: var(--dk-border2) !important;
      color: var(--dk-text) !important;
    }
    .cmd input:focus {
      border-color: rgba(124,58,237,.6) !important;
      box-shadow: 0 0 0 3px rgba(124,58,237,.15) !important;
    }
    .cmd input::placeholder { color: var(--dk-dim) !important; }

    /* MAIN VIEWER AREA */
    .main { background: transparent !important; }
    .viewer {
      background: #050810 !important;
      border-color: var(--dk-border) !important;
      box-shadow: inset 0 2px 12px rgba(0,0,0,.5), 0 0 0 1px rgba(99,120,180,.1) !important;
    }

    /* PANEL HEADER */
    .panel-header { border-bottom-color: var(--dk-border) !important; }
    .panel-title { color: var(--dk-muted) !important; }

    /* BUTTONS - Base */
    .btn {
      background: rgba(13,17,32,.8) !important;
      border-color: var(--dk-border2) !important;
      color: var(--dk-muted) !important;
      box-shadow: 0 1px 4px rgba(0,0,0,.3) !important;
    }
    .btn:hover:not(:disabled) {
      background: rgba(20,25,45,.9) !important;
      color: var(--dk-text) !important;
      border-color: rgba(99,120,180,.5) !important;
      transform: translateY(-1px) !important;
    }

    /* COLORED BUTTONS - matching the mockup */
    .btn.primary, .btn[class*="primary"] {
      background: linear-gradient(135deg,#2563EB,#1D4ED8) !important;
      border-color: #3B82F6 !important;
      color: #fff !important;
      box-shadow: 0 2px 12px rgba(37,99,235,.45) !important;
    }
    .btn.primary:hover { background: linear-gradient(135deg,#1D4ED8,#1E40AF) !important; box-shadow: 0 4px 20px rgba(37,99,235,.55) !important; }

    .btn.green, .btn.grn {
      background: linear-gradient(135deg,#059669,#047857) !important;
      border-color: #10B981 !important;
      color: #fff !important;
      box-shadow: 0 2px 12px rgba(5,150,105,.45) !important;
    }
    .btn.green:hover, .btn.grn:hover { background: linear-gradient(135deg,#047857,#065F46) !important; }

    .btn.orange, .btn.orn {
      background: linear-gradient(135deg,#D97706,#B45309) !important;
      border-color: #F59E0B !important;
      color: #fff !important;
      box-shadow: 0 2px 12px rgba(217,119,6,.45) !important;
    }
    .btn.orange:hover, .btn.orn:hover { background: linear-gradient(135deg,#B45309,#92400E) !important; }

    .btn.purple {
      background: linear-gradient(135deg,#7C3AED,#6D28D9) !important;
      border-color: #8B5CF6 !important;
      color: #fff !important;
      box-shadow: 0 2px 12px rgba(124,58,237,.45) !important;
    }
    .btn.purple:hover { background: linear-gradient(135deg,#6D28D9,#5B21B6) !important; }

    .btn.dng {
      background: linear-gradient(135deg,#DC2626,#B91C1C) !important;
      border-color: #EF4444 !important;
      color: #fff !important;
      box-shadow: 0 2px 12px rgba(220,38,38,.4) !important;
    }
    .btn.dng:hover { background: linear-gradient(135deg,#B91C1C,#991B1B) !important; }

    .btn.outline-orange, .btn.oorn {
      background: rgba(217,119,6,.15) !important;
      border-color: rgba(245,158,11,.4) !important;
      color: #FCD34D !important;
    }
    .btn.outline-green, .btn.ogrn {
      background: rgba(5,150,105,.15) !important;
      border-color: rgba(16,185,129,.4) !important;
      color: #34D399 !important;
    }
    .btn.outline-purple, .btn.obl, .btn.pri {
      background: rgba(124,58,237,.15) !important;
      border-color: rgba(139,92,246,.4) !important;
      color: #A78BFA !important;
    }

    /* AI BADGE */
    .ai-badge {
      background: rgba(124,58,237,.2) !important;
      border-color: rgba(139,92,246,.4) !important;
      color: #A78BFA !important;
    }

    /* MEASUREMENT ITEMS */
    .item {
      background: rgba(13,17,32,.6) !important;
      border-color: var(--dk-border) !important;
    }
    .item:hover {
      background: rgba(124,58,237,.15) !important;
      border-color: rgba(139,92,246,.4) !important;
    }

    /* BUBBLES / AI LOG */
    .bubble {
      background: rgba(13,17,32,.7) !important;
      border-color: var(--dk-border) !important;
      color: var(--dk-text) !important;
    }
    .bubble.ai { border-left-color: #7C3AED !important; }
    .bubble.user { border-left-color: #2563EB !important; }

    /* INPUTS / SELECTS / TEXTAREAS */
    input, select, textarea {
      background: rgba(13,17,32,.85) !important;
      border-color: var(--dk-border2) !important;
      color: var(--dk-text) !important;
    }
    input::placeholder, textarea::placeholder { color: var(--dk-dim) !important; }
    select option { background: #0D1120; color: #E2E8F0; }
    input:focus, select:focus, textarea:focus {
      border-color: rgba(124,58,237,.6) !important;
      box-shadow: 0 0 0 3px rgba(124,58,237,.12) !important;
      outline: none !important;
    }

    /* DROP ZONES */
    .drop-zone, [id*="drop"], [class*="drop"] {
      background: rgba(13,17,32,.5) !important;
      border-color: rgba(99,120,180,.25) !important;
    }

    /* PILLS / BADGES */
    .pill {
      background: rgba(13,17,32,.8) !important;
      border-color: var(--dk-border) !important;
      color: var(--dk-muted) !important;
    }

    /* TABLES */
    th {
      background: rgba(8,11,24,.8) !important;
      color: var(--dk-muted) !important;
      border-color: var(--dk-border) !important;
    }
    td { border-color: var(--dk-border) !important; color: var(--dk-text) !important; }
    tr:nth-child(even) { background: rgba(13,17,32,.4) !important; }
    tr:hover { background: rgba(124,58,237,.08) !important; }

    /* HUD CHIPS */
    .hud-chip {
      background: rgba(8,11,24,.85) !important;
      border-color: rgba(99,120,180,.2) !important;
      color: rgba(226,232,240,.7) !important;
    }

    /* TOASTS */
    .toast, #toast {
      background: rgba(13,17,32,.96) !important;
      border-color: var(--dk-border2) !important;
      color: var(--dk-text) !important;
      backdrop-filter: blur(12px) !important;
    }

    /* DIVIDERS */
    .divider { background: var(--dk-border) !important; }

    /* TEXT COLORS */
    h1,h2,h3,h4,h5,h6 { color: var(--dk-text) !important; }
    .tlabel { color: var(--dk-dim) !important; }

    /* SCROLLBARS */
    ::-webkit-scrollbar { width: 5px; height: 5px; }
    ::-webkit-scrollbar-track { background: rgba(8,11,24,.5); }
    ::-webkit-scrollbar-thumb { background: rgba(99,120,180,.3); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: rgba(124,58,237,.5); }

    /* ===== END NAVY DARK THEME ===== */
  </style>

  <style>
    /* ===== DARK CARDS & PANELS FIX ===== */

    /* Override CSS variables to dark values */
    :root {
      --white: #0D1120 !important;
      --gray-50: #080B18 !important;
      --gray-100: #111827 !important;
      --gray-200: rgba(99,120,180,.22) !important;
      --gray-400: #4A6580 !important;
      --gray-500: #8B9BAE !important;
      --gray-600: #9CA8BB !important;
      --gray-700: #C8D3E0 !important;
      --gray-900: #E2E8F0 !important;
      --g50: #080B18 !important;
      --g100: #111827 !important;
      --g200: rgba(99,120,180,.22) !important;
      --g400: #4A6580 !important;
      --g500: #8B9BAE !important;
      --g700: #C8D3E0 !important;
      --g900: #E2E8F0 !important;
      --blue-light: rgba(37,99,235,.15) !important;
      --blue-mid: rgba(59,130,246,.35) !important;
      --bl: rgba(37,99,235,.15) !important;
      --bm: rgba(59,130,246,.35) !important;
      --orange-light: rgba(217,119,6,.12) !important;
      --orange-mid: rgba(245,158,11,.3) !important;
      --ol: rgba(217,119,6,.12) !important;
      --om: rgba(245,158,11,.3) !important;
      --green-light: rgba(5,150,105,.12) !important;
      --green-mid: rgba(16,185,129,.3) !important;
      --gl: rgba(5,150,105,.12) !important;
      --gm: rgba(16,185,129,.3) !important;
      --purple-light: rgba(124,58,237,.12) !important;
      --sh: 0 4px 16px rgba(0,0,0,.5) !important;
      --shs: 0 1px 4px rgba(0,0,0,.4) !important;
      --shadow-sm: 0 1px 4px rgba(0,0,0,.4) !important;
      --shadow: 0 4px 16px rgba(0,0,0,.5) !important;
      --shadow-md: 0 8px 24px rgba(0,0,0,.6) !important;
    }

    /* Force all text to be light */
    body, body * {
      color: #E2E8F0;
    }

    /* Specific overrides for elements that might still show white */
    .bubble, .ai-bubble, [class*="bubble"] {
      background: #111827 !important;
      border-color: rgba(99,120,180,.25) !important;
      color: #E2E8F0 !important;
    }

    /* Chat areas */
    [class*="chat"], [id*="chat"] {
      background: #0D1120 !important;
      color: #E2E8F0 !important;
    }

    /* Upload zones - dashed border areas */
    [class*="upload"], [id*="upload"],
    [class*="drop"], [id*="drop"] {
      background: rgba(8,11,24,.7) !important;
      border-color: rgba(99,120,180,.3) !important;
      color: #8B9BAE !important;
    }

    /* Stats / info pills inside cards */
    [class*="stat"], [class*="info-"] {
      background: #111827 !important;
      border-color: rgba(99,120,180,.2) !important;
      color: #E2E8F0 !important;
    }

    /* Section headers inside cards */
    .hstrip, [class*="hstrip"], [class*="header-strip"] {
      background: #0D1120 !important;
      border-color: rgba(99,120,180,.2) !important;
    }

    /* Instruction / helper text */
    [class*="hint"], [class*="help"], [class*="tip"], pre, code {
      background: rgba(8,11,24,.6) !important;
      color: #8B9BAE !important;
    }

    /* Selection / project dropdowns */
    .project-select, [class*="proj-"], [id*="proj"] {
      background: #111827 !important;
      color: #E2E8F0 !important;
    }

    /* Bold text should be white/bright */
    strong, b, h1, h2, h3, h4, h5, h6,
    [class*="-title"], [class*="-name"],
    .brand-info strong {
      color: #F0F4F8 !important;
      font-weight: 700 !important;
    }

    /* Muted / secondary text */
    [class*="-sub"], [class*="-desc"], [class*="-hint"],
    [class*="-meta"], [class*="-label"], small, .brand-info span {
      color: #8B9BAE !important;
    }

    /* Borders globally */
    [class*="-card"], [class*="-panel"], [class*="-section"],
    [class*="-zone"], [class*="-strip"], [class*="-wrap"] {
      border-color: rgba(99,120,180,.2) !important;
    }

    /* ===== END FIX ===== */
  </style>

</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo">TI</div>
        <div class="title">
          <strong>Centro de Proyectos y Anal√≠ticas</strong>
          <span id="subtitle">Selecciona un proyecto y abre un asistente.</span>
        </div>
      </div>

      <nav class="nav">
        <a href="/static/viewer.html">Medici√≥n</a>
        <a href="/static/structural.html">Estructural</a>
        <a href="/static/budget_advanced.html">Costos</a>
        <a class="active" href="/static/projects.html">Proyectos</a>
      </nav>

      <div class="actions">
        <button class="btn primary" id="btnNew">‚ûï Nuevo Proyecto</button>
        <button class="btn" id="btnRefresh">üîÑ Actualizar</button>
      </div>
    </div>

    <div id="grid" class="grid"></div>
    <div id="empty" class="empty" style="display:none">
      No hay proyectos todav√≠a. Crea uno y te guardamos el historial como si fuera ‚ÄúGoogle Drive de obra‚Äù‚Ä¶ pero sin dramas.
    </div>
  </div>

  <div class="toast" id="toast"></div>

<script>
(() => {
  "use strict";
  const API = "/api/v1";
  const STORAGE_KEY = "TACTICA_ACTIVE_PROJECT";
  const $ = (id) => document.getElementById(id);

  const toastEl = $("toast");
  function toast(msg){
    toastEl.textContent = msg;
    toastEl.classList.add("show");
    clearTimeout(toastEl._t);
    toastEl._t = setTimeout(() => toastEl.classList.remove("show"), 2500);
  }

  function pct(v){ return Math.round((Number(v||0))*100); }

  function card(project){
    const div = document.createElement("div");
    div.className = "card";

    const k = project.kpis || {};
    const mp = pct(k.measure_progress);
    const sp = pct(k.struct_progress);
    const bp = pct(k.budget_progress);

    div.innerHTML = `
      <div style="display:flex; justify-content:space-between; gap:12px; align-items:flex-start;">
        <div>
          <h3>${project.name}</h3>
          <div class="meta">${project.location || "Ubicaci√≥n: ‚Äî"} ¬∑ Moneda: ${project.currency || "‚Äî"}</div>
        </div>
        <span class="pill">${project.id}</span>
      </div>

      <div class="bars">
        <div class="barRow">
          <div>üìê Mediciones</div>
          <div class="bar"><div class="fill" style="width:${mp}%"></div></div>
          <div>${mp}%</div>
        </div>
        <div class="barRow">
          <div>üèóÔ∏è Estructural</div>
          <div class="bar"><div class="fill" style="width:${sp}%"></div></div>
          <div>${sp}%</div>
        </div>
        <div class="barRow">
          <div>üí∞ Presupuesto</div>
          <div class="bar"><div class="fill" style="width:${bp}%"></div></div>
          <div>${bp}%</div>
        </div>
      </div>

      <div class="smallRow">
        <button class="btn primary" data-act="set">‚úÖ Activar</button>
        <button class="btn" data-act="open" data-target="viewer">Abrir Mediciones</button>
        <button class="btn" data-act="open" data-target="struct">Abrir Estructural</button>
        <button class="btn" data-act="open" data-target="budget">Abrir Costos</button>
      </div>

      <div class="meta">
        <small>Eventos: ${(k.counts && Object.values(k.counts).reduce((a,b)=>a+b,0)) || 0} ¬∑ Actualizado: ${new Date(project.updated_at).toLocaleString()}</small>
      </div>
    `;

    div.addEventListener("click", (e) => {
      const btn = e.target.closest("button[data-act]");
      if(!btn) return;
      const act = btn.dataset.act;
      if(act === "set"){
        localStorage.setItem(STORAGE_KEY, project.id);
        toast("Proyecto activo: " + project.name);
        $("subtitle").textContent = "Proyecto activo: " + project.name;
        return;
      }
      if(act === "open"){
        localStorage.setItem(STORAGE_KEY, project.id);
        const target = btn.dataset.target;
        const url = target === "viewer" ? "/static/viewer.html"
                  : target === "struct" ? "/static/structural.html"
                  : "/static/budget_advanced.html";
        location.href = url;
      }
    });

    return div;
  }

  async function load(){
    const grid = $("grid");
    grid.innerHTML = "";
    const res = await fetch(`${API}/projects`);
    const data = await res.json();
    const projects = data.projects || [];
    $("empty").style.display = projects.length ? "none" : "block";
    for(const p of projects){
      grid.appendChild(card(p));
    }
  }

  async function create(){
    const name = prompt("Nombre del proyecto:");
    if(!name) return;
    const location = prompt("Ubicaci√≥n (opcional):") || "";
    const currency = (prompt("Moneda (COP, USD, EUR):","COP") || "COP").toUpperCase();
    const fd = new FormData();
    fd.append("name", name);
    fd.append("location", location);
    fd.append("currency", currency);
    const res = await fetch(`${API}/projects`, { method:"POST", body: fd });
    if(!res.ok){ toast("No se pudo crear el proyecto"); return; }
    toast("Proyecto creado ‚úÖ");
    await load();
  }

  $("btnNew").addEventListener("click", create);
  $("btnRefresh").addEventListener("click", load);

  load().catch(() => toast("No pude cargar proyectos (backend)."));
})();
</script>
</body>
</html>
